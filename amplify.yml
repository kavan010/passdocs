version: 1
applications:
  - appRoot: .
    frontend:
      phases:
        preBuild:
          commands:
            - export NEXTAUTH_URL=https://passdocs.kavang.com
            - export NEXTAUTH_SECRET=<your-secret>
            - export GOOGLE_CLIENT_ID=<your-client-id>
            - export GOOGLE_CLIENT_SECRET=<your-google-client-secret>
            - export MONGODB_URI=<your-atlas-uri>
            - npm ci
        build:
          commands:
            - npm run build
      artifacts:
        baseDirectory: .next
        files:
          - '**/*'
      cache:
        paths:
          - node_modules/**/*
    backend:
      phases:
        build:
          commands:
            - echo "No backend build step"
